<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>김춘분 님의 분석노트</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <style>
        body {
            background-color: #f8f9fa;
        }

        .container-custom {
            margin-top: 50px;
        }

        h1 {
            font-weight: bold;
            margin-bottom: 30px;
        }

        .card-custom {
            border-radius: 10px;
            border: 2px solid #e9ecef;
            padding: 20px;
            background-color: #ffffff;
            height: 100%;
        }

        .card-title {
            font-weight: bold;
        }

        .priority-list {
            list-style: none;
            padding-left: 0;
        }

        .priority-item {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border-radius: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .priority-item .badge {
            background-color: white;
            color: #007bff;
            padding: 5px 10px;
            border-radius: 10px;
        }

        .card-custom.manual-card {
            height: auto;
            min-height: 600px;
        }

        .chart-container {
            height: 200px;
        }

        .conversation-divider {
            border-left: 1px solid #e9ecef;
        }

        .input-group input {
            border-radius: 20px 0 0 20px;
            border-right: none;
        }

        .input-group .btn {
            border-radius: 0 20px 20px 0;
            background-color: #007bff;
            color: white;
        }

        .equal-height {
            display: flex;
            align-items: stretch;
        }
    </style>
</head>

<body>
<div class="container container-custom">
    <h1>김춘분 님의 분석 노트</h1>
    <div class="row">
        <!-- 대응 메뉴얼 -->
        <div class="col-md-5 mb-4 d-flex">
            <div class="card-custom manual-card w-100" style="height: 100%;">
                <h3 class="card-title">대응 메뉴얼</h3>
                <br>
                    <ul class="priority-list" id="priorityList">
                        <li class="priority-item">
                            <span>공감하는 말하기</span>
                            <span class="badge">83%(성공 횟수: 25회 / 시도 횟수: 30회)</span>
                        </li>
                        <li class="priority-item">
                            <span>심호흡하기</span>
                            <span class="badge">67%(성공 횟수: 16회 / 시도 횟수: 24회)</span>
                        </li>
                        <li class="priority-item">
                            <span>좋아하는 노래 틀어드리기</span>
                            <span class="badge">52%(성공 횟수: 11회 / 시도 횟수: 21회)</span>
                        </li>
                        <li class="priority-item">
                            <span>보호자와 통화 연결하기</span>
                            <span class="badge">50%(성공 횟수: 9회 / 시도 횟수: 18회)</span>
                        </li>
                        <li class="priority-item">
                            <span>옛날 이야기해드리기</span>
                            <span class="badge">47%(성공 횟수: 7회 / 시도 횟수: 15회)</span>
                        </li>
                        <li class="priority-item">
                            <span>사진 앨범 보여드리기</span>
                            <span class="badge">38%(성공 횟수: 5회 / 시도 횟수: 13회)</span>
                        </li>
                        <li class="priority-item">
                            <span>드라마 명장면 틀어드리기</span>
                            <span class="badge">30%(성공 횟수: 3회 / 시도 횟수: 10회)</span>
                        </li>
                        <li class="priority-item">
                            <span>간단한 운동 유도하기</span>
                            <span class="badge">25%(성공 횟수: 2회 / 시도 횟수: 8회)</span>
                        </li>
                        <li class="priority-item">
                            <span>가벼운 퀴즈 드리기</span>
                            <span class="badge">20%(성공 횟수: 1회 / 시도 횟수: 5회)</span>
                        </li>
                        <li class="priority-item">
                            <span>바둑 두기</span>
                            <span class="badge">0%(성공 횟수: 0회 / 시도 횟수: 3회)</span>
                        </li>
                    </ul>
                    <div class="input-group mt-2">
                        <input type="text" id="userInput" class="form-control" placeholder="입력하세요" aria-label="입력하세요">
                        <button class="btn btn-outline-secondary" id="addButton" type="button">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M6.854 3.646a.5.5 0 0 1 0 .708L3.707 7.5H13.5a.5.5 0 0 1 0 1H3.707l3.147 3.146a.5.5 0 0 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 0 1 .708 0z"/>
                            </svg>
                        </button>
                    </div>
            </div>
        </div>

        <!-- 대화 내용, 폭언 그래프 -->
        <div class="col-md-7 d-flex flex-column">
            <div class="row mb-4 flex-grow-1">
                <!-- 대화 내용 -->
                <div class="col-md-12">
                    <div class="card-custom h-100">
                        <h3 class="card-title">대화 내용</h3>
                        <br>
                        <div class="row">
                            <div class="col-md-6">
                                <h4>대화 원문</h4>
                                <hr>
                                <ul>
                                    <li>"너 대체 뭐하는 거야!"</li>
                                    <li>"왜 자꾸 내 옆에 있는 거야!"</li>
                                    <li>"너 같은 게 뭐라고 나한테 명령을 해!"</li>
                                    <li>"꺼지라고 꺼져!"</li>
                                    <li>"내 인생 네가 살아봤어?"</li>
                                </ul>
                            </div>
                            <div class="col-md-6 conversation-divider">
                                <h4>AI 분석</h4>
                                <hr>
                                <p>현재 김춘분 어르신은 감정적으로 매우 불안하십니다.</p>
                                <p>자존감도 많이 떨어지신 상태로, 아마도 통제력과 독립성이 많이 떨어지셔서 무력감을 느끼시는 것일 수도 있습니다.</p>
                                <p>어르신께서 안정감을 느끼실 수 있도록 차분하고 신뢰할 수 있는 분위기를 조성해야 합니다.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row flex-grow-1">
                <!-- 폭언 그래프 -->
                <div class="col-md-12">
                    <div class="card-custom h-100">
                        <h3 class="card-title">김춘분 님의 폭언 그래프</h3>
                        <br>
                        <div class="row">
                            <div class="col-md-6">
                                <h4>폭언 빈도</h4>
                                <hr>
                                <div class="chart-container">
                                    <canvas id="myChart"></canvas>
                                </div>
                            </div>
                            <div class="col-md-6 conversation-divider">
                                <h4>AI 분석</h4>
                                <hr>
                                <p>폭언 빈도 수가 급증하는 시간대는 주로 식사 시간 직후이므로, 이 시간대와 관련된 스트레스 요인이 있는지 확인할 필요가 있습니다.</p>
                                <p>또는 최근에 복용하시는 약물의 종류가 바뀐 것이 원인이 될 수도 있습니다.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Chart.js setup for 폭언 빈도 chart
    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['10:00', '12:00', '14:00', '16:00', '18:00', '20:00', '22:00'],
            datasets: [{
                label: '폭언 빈도',
                data: [2, 3, 7, 4, 2, 6, 4],
                backgroundColor: 'rgba(0, 123, 255, 0.2)',
                borderColor: 'rgba(0, 123, 255, 1)',
                borderWidth: 2,
                fill: true
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true,
                    max: 8
                }
            }
        }
    });

    document.getElementById('addButton').addEventListener('click', function() {
        var userInput = document.getElementById('userInput').value;
        if (userInput) {
            var priorityList = document.getElementById('priorityList');

            var newItem = document.createElement('li');
            newItem.classList.add('priority-item');
            newItem.style.backgroundColor = 'red';
            newItem.innerHTML = '<span>' + userInput + '</span>' + '<span class="badge" style="color: red;">100%(성공 횟수: 1회 / 총 시도 횟수: 1회)</span>';

            priorityList.insertBefore(newItem, priorityList.firstChild);

            document.getElementById('userInput').value = '';
        }
    });
</script>
</body>
</html>